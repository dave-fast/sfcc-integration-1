{
  "openapi": "3.0.0",
  "info": {
    "title": "external-order-api",
    "version": "V1",
    "contact": {
      "name": "Fast",
      "url": "https://fast.co",
      "email": "api@fast.co"
    },
    "description": "# Authentication\n\n<!-- ReDoc-Inject: <security-definitions> -->"
  },
  "tags": [
    {
      "name": "ExternalOrderManagementService",
      "description": "Fast external API"
    }
  ],
  "paths": {
    "/v1/external/batch_update": {
      "post": {
        "summary": "Batch update in case seller is not running real-time updates",
        "description": "Inform Fast regarding updates in batch. Expected to be in temporal sequence",
        "operationId": "ExternalOrderManagementService_BatchUpdate",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v1BatchUpdateResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/v1BatchUpdateRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "ExternalOrderManagementService"
        ]
      }
    },
    "/v1/external/orders/{order_id.value}": {
      "get": {
        "summary": "Get Order by Fast id",
        "description": "Get Order by Fast id",
        "operationId": "ExternalOrderManagementService_GetOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v1GetOrderResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id.value",
            "description": "UUID value",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "ExternalOrderManagementService"
        ]
      },
      "post": {
        "summary": "Cancel Order by Fast id",
        "description": "Cancel Order by Fast id",
        "operationId": "ExternalOrderManagementService_CancelOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v1CancelOrderResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id.value",
            "description": "UUID value",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/v1CancelOrderRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "ExternalOrderManagementService"
        ]
      }
    },
    "/v1/external/orders/{order_id.value}/business_event": {
      "post": {
        "summary": "Send a business event",
        "description": "Inform Fast regarding a order related business event that happened",
        "operationId": "ExternalOrderManagementService_BusinessEvent",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v1BusinessEventResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id.value",
            "description": "UUID value",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/v1BusinessEventRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "ExternalOrderManagementService"
        ]
      }
    },
    "/v1/external/orders/{order_id.value}/refund": {
      "post": {
        "summary": "Refund by Order id",
        "description": "Refund by Order id",
        "operationId": "ExternalOrderManagementService_RefundOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v1RefundOrderResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id.value",
            "description": "UUID value",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/v1RefundOrderRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "ExternalOrderManagementService"
        ]
      }
    }
  },
  "servers": [
    {
      "url": "https://api.fast.co/"
    }
  ],
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "name": "FASTSESSION",
        "in": "header"
      }
    },
    "schemas": {
      "protobufAny": {
        "type": "object",
        "properties": {
          "type_url": {
            "type": "string"
          },
          "value": {
            "type": "string",
            "format": "byte"
          }
        }
      },
      "rpcStatus": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/protobufAny"
            }
          }
        }
      },
      "v1BatchUpdateRequest": {
        "type": "object",
        "properties": {
          "update_list": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1GenericUpdate"
            }
          }
        }
      },
      "v1BatchUpdateResponse": {
        "type": "object"
      },
      "v1BusinessEventRequest": {
        "type": "object",
        "properties": {
          "order_id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "event_type": {
            "$ref": "#/components/schemas/v1BusinessEventType"
          },
          "fulfillment": {
            "$ref": "#/components/schemas/v1OrderFulfillmentEvent"
          }
        }
      },
      "v1BusinessEventResponse": {
        "type": "object"
      },
      "v1BusinessEventType": {
        "type": "string",
        "enum": [
          "BUSINESS_EVENT_TYPE_UNSPECIFIED",
          "BUSINESS_EVENT_TYPE_FULFILLMENT",
          "BUSINESS_EVENT_TYPE_CLEAR_TO_COLLECT_PAYMENT"
        ],
        "default": "BUSINESS_EVENT_TYPE_UNSPECIFIED"
      },
      "v1CancelOrderRequest": {
        "type": "object",
        "properties": {
          "order_id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "reason": {
            "$ref": "#/components/schemas/v1CancelReasonCode"
          },
          "notes": {
            "type": "string",
            "description": "Any additional notes associated with the cancellation."
          }
        }
      },
      "v1CancelOrderResponse": {
        "type": "object"
      },
      "v1CancelReasonCode": {
        "type": "string",
        "enum": [
          "CANCEL_REASON_CODE_UNSPECIFIED",
          "CANCEL_REASON_CODE_CUSTOMER_INITIATED",
          "CANCEL_REASON_CODE_MERCHANT_INITIATED",
          "CANCEL_REASON_CODE_NO_STOCK",
          "CANCEL_REASON_CODE_BAD_CONFIG",
          "CANCEL_REASON_CODE_OTHER"
        ],
        "default": "CANCEL_REASON_CODE_UNSPECIFIED"
      },
      "v1DeviceInfo": {
        "type": "object",
        "properties": {
          "ip_address": {
            "type": "string"
          }
        }
      },
      "v1DiscountOrigin": {
        "type": "string",
        "enum": [
          "DISCOUNT_ORIGIN_UNSPECIFIED",
          "DISCOUNT_ORIGIN_USER",
          "DISCOUNT_ORIGIN_FAST",
          "DISCOUNT_ORIGIN_VENDOR"
        ],
        "default": "DISCOUNT_ORIGIN_UNSPECIFIED",
        "title": "- DISCOUNT_ORIGIN_UNSPECIFIED: Discounts can be originated from many sources"
      },
      "v1DiscountType": {
        "type": "string",
        "enum": [
          "DISCOUNT_TYPE_UNSPECIFIED",
          "DISCOUNT_TYPE_MISC",
          "DISCOUNT_TYPE_REGULAR",
          "DISCOUNT_TYPE_SHIPPING",
          "DISCOUNT_TYPE_HANDLING",
          "DISCOUNT_TYPE_WRAPPING"
        ],
        "default": "DISCOUNT_TYPE_UNSPECIFIED"
      },
      "v1FastOrder": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "order_type": {
            "$ref": "#/components/schemas/v1OrderType"
          },
          "currency_code": {
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/v1OrderStatus"
          },
          "bill_to": {
            "$ref": "#/components/schemas/v1OrderAddress"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderLine"
            }
          },
          "shipment_plans": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderShipmentPlan"
            }
          },
          "coupons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderDiscount"
            }
          },
          "total_amount": {
            "type": "string"
          },
          "sub_total": {
            "type": "string"
          },
          "total_discounts": {
            "type": "string"
          },
          "total_tax": {
            "type": "string"
          },
          "total_shipping": {
            "type": "string"
          },
          "refunds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderRefund"
            }
          },
          "custom_values": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderCustomValue"
            }
          },
          "user_note": {
            "type": "string"
          },
          "store_note": {
            "type": "string"
          },
          "fast_note": {
            "type": "string"
          },
          "device_info": {
            "$ref": "#/components/schemas/v1DeviceInfo"
          },
          "short_order_id": {
            "type": "string"
          }
        }
      },
      "v1GenericUpdate": {
        "type": "object",
        "properties": {
          "type": {
            "$ref": "#/components/schemas/v1UpdateType"
          },
          "timestamp": {
            "type": "string",
            "format": "int64"
          },
          "cancel_order": {
            "$ref": "#/components/schemas/v1CancelOrderRequest"
          },
          "business_event": {
            "$ref": "#/components/schemas/v1BusinessEventRequest"
          },
          "refund_order": {
            "$ref": "#/components/schemas/v1RefundOrderRequest"
          },
          "order_update": {
            "$ref": "#/components/schemas/v1OrderUpdateRequest"
          }
        }
      },
      "v1GetOrderResponse": {
        "type": "object",
        "properties": {
          "order": {
            "$ref": "#/components/schemas/v1FastOrder"
          }
        }
      },
      "v1ItemFulfillmentModel": {
        "type": "string",
        "enum": [
          "ITEM_FULFILLMENT_MODEL_UNSPECIFIED",
          "ITEM_FULFILLMENT_MODEL_PHYSICAL",
          "ITEM_FULFILLMENT_MODEL_DIGITAL",
          "ITEM_FULFILLMENT_MODEL_SERVICE"
        ],
        "default": "ITEM_FULFILLMENT_MODEL_UNSPECIFIED"
      },
      "v1OrderAddress": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "middle_name": {
            "type": "string"
          },
          "company": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "address_1": {
            "type": "string"
          },
          "address_2": {
            "type": "string"
          },
          "city_locality": {
            "type": "string"
          },
          "state_province": {
            "type": "string"
          },
          "state_province_code": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "country_code": {
            "type": "string"
          },
          "postal_code": {
            "type": "string"
          }
        }
      },
      "v1OrderCustomValue": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "v1OrderDiscount": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "origin": {
            "$ref": "#/components/schemas/v1DiscountOrigin"
          },
          "type": {
            "$ref": "#/components/schemas/v1DiscountType"
          },
          "applied": {
            "type": "boolean"
          },
          "total_amount": {
            "type": "string"
          }
        }
      },
      "v1OrderFulfillmentEvent": {
        "type": "object",
        "properties": {
          "shipment": {
            "$ref": "#/components/schemas/v1ShippingInfo"
          }
        }
      },
      "v1OrderLine": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_id": {
            "type": "string"
          },
          "external_product_id": {
            "type": "string"
          },
          "external_variant_id": {
            "type": "string"
          },
          "external_options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderCustomValue"
            }
          },
          "customizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderCustomValue"
            }
          },
          "quantity": {
            "type": "integer",
            "format": "int64"
          },
          "quantity_fulfilled": {
            "type": "integer",
            "format": "int64"
          },
          "unit_price": {
            "type": "string"
          },
          "discounted_unit_price": {
            "type": "string"
          },
          "line_discount_amount": {
            "type": "string"
          },
          "subtotal_amount": {
            "type": "string"
          },
          "tax_amount": {
            "type": "string"
          },
          "total_amount": {
            "type": "string"
          },
          "discounts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderDiscount"
            }
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "image_url": {
            "type": "string"
          },
          "fulfillment_mode": {
            "$ref": "#/components/schemas/v1ItemFulfillmentModel"
          }
        }
      },
      "v1OrderLineContext": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "quantity": {
            "type": "string",
            "format": "int64"
          }
        }
      },
      "v1OrderLineReference": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "quantity": {
            "type": "integer",
            "format": "int64"
          },
          "external_id": {
            "type": "string"
          }
        }
      },
      "v1OrderRefund": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_id": {
            "type": "string"
          },
          "reason": {
            "type": "string"
          },
          "use_original_method": {
            "type": "boolean"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderLineReference"
            }
          },
          "refund_date": {
            "type": "string",
            "format": "uint64"
          },
          "amount": {
            "type": "string"
          },
          "tax": {
            "type": "string"
          },
          "shipping": {
            "type": "string"
          }
        }
      },
      "v1OrderShipmentPlan": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_id": {
            "type": "string"
          },
          "ship_to": {
            "$ref": "#/components/schemas/v1OrderAddress"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderLineReference"
            }
          },
          "selected_option": {
            "$ref": "#/components/schemas/v1ShippingOption"
          },
          "available_options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1ShippingOption"
            }
          },
          "shipments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1Shipment"
            }
          }
        }
      },
      "v1OrderStatus": {
        "type": "string",
        "enum": [
          "ORDER_STATUS_UNSPECIFIED",
          "ORDER_STATUS_CART",
          "ORDER_STATUS_PENDING",
          "ORDER_STATUS_HOLD",
          "ORDER_STATUS_BOOKED",
          "ORDER_STATUS_PENDING_FULFILLMENT",
          "ORDER_STATUS_FULFILLED",
          "ORDER_STATUS_COMPLETE",
          "ORDER_STATUS_CANCELED",
          "ORDER_STATUS_DELETED"
        ],
        "default": "ORDER_STATUS_UNSPECIFIED",
        "title": "- ORDER_STATUS_UNSPECIFIED: Order and Cart share the same data model, this status means that Order is in Cart status\nthis status will be populated on all Fast Carts"
      },
      "v1OrderType": {
        "type": "string",
        "enum": [
          "ORDER_TYPE_UNSPECIFIED",
          "ORDER_TYPE_CART",
          "ORDER_TYPE_ORDER",
          "ORDER_TYPE_RETURN",
          "ORDER_TYPE_EXCHANGE",
          "ORDER_TYPE_CREDIT",
          "ORDER_TYPE_REFUND"
        ],
        "default": "ORDER_TYPE_UNSPECIFIED"
      },
      "v1OrderUpdateRequest": {
        "type": "object",
        "properties": {
          "order_id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_order_id": {
            "type": "string"
          }
        }
      },
      "v1RefundMethod": {
        "type": "string",
        "enum": [
          "REFUND_METHOD_UNSPECIFIED",
          "REFUND_METHOD_STORE_CREDIT",
          "REFUND_METHOD_ORIGINAL_METHOD"
        ],
        "default": "REFUND_METHOD_UNSPECIFIED"
      },
      "v1RefundOrderLineContext": {
        "type": "object",
        "properties": {
          "line": {
            "$ref": "#/components/schemas/v1OrderLineContext"
          },
          "reason": {
            "$ref": "#/components/schemas/v1RefundReasonCode"
          }
        }
      },
      "v1RefundOrderRequest": {
        "type": "object",
        "properties": {
          "order_id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_refund_id": {
            "type": "string"
          },
          "reason": {
            "$ref": "#/components/schemas/v1RefundReasonCode"
          },
          "note": {
            "type": "string"
          },
          "method": {
            "$ref": "#/components/schemas/v1RefundMethod"
          },
          "amount": {
            "type": "string",
            "description": "Should be a float value. Ex: \"42.00\""
          },
          "tax_amount": {
            "type": "string",
            "description": "Should be a float value. Ex: \"42.00\""
          },
          "shipping_amount": {
            "type": "string",
            "description": "Should be a float value. Ex: \"42.00\""
          },
          "order_lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1RefundOrderLineContext"
            }
          }
        }
      },
      "v1RefundOrderResponse": {
        "type": "object"
      },
      "v1RefundReasonCode": {
        "type": "string",
        "enum": [
          "REFUND_REASON_CODE_UNSPECIFIED",
          "REFUND_REASON_CODE_UNSATISFIED",
          "REFUND_REASON_CODE_WRONG_OPTION",
          "REFUND_REASON_CODE_WRONG_PRODUCT",
          "REFUND_REASON_CODE_DAMAGED_PRODUCT",
          "REFUND_REASON_CODE_NOT_DELIVERED",
          "REFUND_REASON_CODE_WRONG_TAX",
          "REFUND_REASON_CODE_WRONG_SHIPPING",
          "REFUND_REASON_CODE_OVERCHARGE",
          "REFUND_REASON_CODE_COURTESY",
          "REFUND_REASON_CODE_OTHER"
        ],
        "default": "REFUND_REASON_CODE_UNSPECIFIED"
      },
      "v1Shipment": {
        "type": "object",
        "properties": {
          "carrier": {
            "type": "string"
          },
          "tracking_number": {
            "type": "string"
          },
          "estimated_delivery_date": {
            "type": "string",
            "format": "uint64"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderLineReference"
            }
          }
        }
      },
      "v1ShippingInfo": {
        "type": "object",
        "properties": {
          "plan_id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "tracking_number": {
            "type": "string"
          },
          "carrier": {
            "type": "string"
          },
          "estimated_delivery_date": {
            "type": "string",
            "description": "Expected format in YYYY-MM-DD"
          },
          "order_lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/v1OrderLineContext"
            }
          }
        }
      },
      "v1ShippingOption": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/v1UUID"
          },
          "external_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "shipment_type": {
            "$ref": "#/components/schemas/v1ShippingOptionType"
          },
          "cost": {
            "type": "string"
          },
          "tax": {
            "type": "string"
          },
          "total": {
            "type": "string"
          },
          "carrier": {
            "type": "string"
          },
          "service_level": {
            "type": "string"
          }
        }
      },
      "v1ShippingOptionType": {
        "type": "string",
        "enum": [
          "SHIPPING_OPTION_TYPE_UNSPECIFIED",
          "SHIPPING_OPTION_TYPE_IN_STORE_PICKUP",
          "SHIPPING_OPTION_TYPE_OTHER"
        ],
        "default": "SHIPPING_OPTION_TYPE_UNSPECIFIED"
      },
      "v1UUID": {
        "type": "object",
        "properties": {
          "value": {
            "type": "string",
            "title": "UUID value"
          }
        },
        "title": "Typed UUID",
        "required": [
          "value"
        ]
      },
      "v1UpdateType": {
        "type": "string",
        "enum": [
          "UPDATE_TYPE_UNSPECIFIED",
          "UPDATE_TYPE_BUSINESS_EVENT",
          "UPDATE_TYPE_ORDER_CANCEL",
          "UPDATE_TYPE_ORDER_CREATE",
          "UPDATE_TYPE_ORDER_UPDATE",
          "UPDATE_TYPE_ORDER_REFUND"
        ],
        "default": "UPDATE_TYPE_UNSPECIFIED"
      }
    }
  }
}